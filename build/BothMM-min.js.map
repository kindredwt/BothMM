{"version":3,"sources":["webpack:///build/BothMM-min.js","webpack:///webpack/bootstrap efd09fb9ee1d4194293b","webpack:///./src/main.js"],"names":["BothMM","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","findWithAttr","an","document","querySelectorAll","all","getElementsByTagName","marked","i","length","getAttribute","push","discardIfAncestorAttr","elms","good","elm","parentNode","translateSub","encSrcParent","encTgt","encoding","nodeType","__raw","nodeValue","cvtKey","cvt","stringConverterMap","no_op","encSrcSel","encTgtEff","setAttribute","childNodes","getCookie","key","decodeURIComponent","cookie","replace","RegExp","encodeURIComponent","setCookie","value","path","onDomReady","zawgyiFont","hasFont","roots","console","log","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","root","err","setEncoding","selectors","addEventListener","evt","target","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","readyListeners","listener","e","error","Object","defineProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","window","becListeners","aecListeners","this","f","setTimeout","font","node","createElement","innerHTML","firstChild","style","fontFamily","body","appendChild","widthOrSans","clientWidth","widthOrMono","removeChild","before","VERSION","zawgyi_unicode","s","unicode_zawgyi","ready","readyState"],"mappings":"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","file":"build/BothMM-min.js","sourcesContent":["var BothMM =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t// Copyright (C) 2015 Logi Ragnarsson <logi@logi.org>\n\t\n\t// Ensure that console.log and console.error don't cause errors\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar console = window.console || {};\n\tconsole.log = console.log || function () {};\n\tconsole.error = console.error || console.log;\n\t\n\t// Private state\n\t\n\tvar readyListeners = [];\n\tvar becListeners = [];\n\tvar aecListeners = [];\n\t\n\t/**\n\t * Library to allow Burmese-language web content to be authored in both Zawgyi and Unicode and to be viewed by users\n\t * whichever font/encoding they have configured in their browsers.\n\t *\n\t * It initially has a very limited set of members, until the library has properly initialised. Those members are\n\t * documented as such.\n\t */\n\t\n\tvar BothMM = (function () {\n\t    function BothMM() {\n\t        _classCallCheck(this, BothMM);\n\t    }\n\t\n\t    _createClass(BothMM, null, [{\n\t        key: 'ready',\n\t\n\t        /**\n\t         * Call the passed-in function when the BothMM library is whenReady. This is guaranteed to also be after the DOM is\n\t         * initialised.\n\t         * @param f\n\t         */\n\t        value: function ready(f) {\n\t            if (readyListeners) {\n\t                readyListeners.push(f);\n\t            } else {\n\t                setTimeout(f, 0);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'hasFont',\n\t\n\t        /**\n\t         * Tests whether a given font is installed in the user's browser.\n\t         * @param {string} font The name of the font to test for\n\t         * @returns {boolean} Whether the font is available\n\t         */\n\t        value: function hasFont(font) {\n\t            /* Works by constructing a <div/> with some text in the requested font,\n\t             * but either \"sans-serif\" or \"monospace\" as the backup font. If the font\n\t             * exists, the browser will use that font and both elements have the same\n\t             * width. If the font does not exist, the fallback fonts have very\n\t             * different widths. */\n\t\n\t            var node = document.createElement('div');\n\t            node.innerHTML = '<span style=\"position:absolute!important;width:auto!important;font-size:100px!important;left:-999px\">. . .</span>';\n\t            node = node.firstChild;\n\t\n\t            node.style.fontFamily = font + ', sans-serif';\n\t            document.body.appendChild(node);\n\t            var widthOrSans = node.clientWidth;\n\t            node.style.fontFamily = font + ', monospace';\n\t            var widthOrMono = node.clientWidth;\n\t            document.body.removeChild(node);\n\t\n\t            console.log(font, widthOrSans == widthOrMono ? 'exists' : 'is bogus', widthOrSans, widthOrMono);\n\t            return widthOrSans == widthOrMono;\n\t        }\n\t    }, {\n\t        key: 'beforeEncodingChange',\n\t\n\t        /**\n\t         * Register function to call before the encoding is changed.\n\t         * If the function throws an exception, then the change will be aborted. */\n\t        value: function beforeEncodingChange(f) {\n\t            becListeners.push(f);\n\t        }\n\t    }, {\n\t        key: 'afterEncodingChange',\n\t\n\t        /**\n\t         * Register function to call after the encoding has been changed.\n\t         * If the function throws an exception, then the change will be aborted. */\n\t        value: function afterEncodingChange(f) {\n\t            aecListeners.push(f);\n\t        }\n\t    }, {\n\t        key: 'setEncoding',\n\t\n\t        /**\n\t         *  Set the target encoding and translate all discovered element.\n\t         *  @param {string=} encoding Change to this encoding or omit to refresh translation.\n\t         */\n\t        value: function setEncoding(encoding) {\n\t            if (encoding === undefined) {\n\t                encoding = BothMM.encoding;\n\t            }\n\t            var before = BothMM.encoding;\n\t            for (var i = 0; i < becListeners.length; i++) {\n\t                becListeners[i](before, encoding);\n\t            }\n\t            BothMM.encoding = encoding;\n\t            translateSub('off', BothMM.roots);\n\t\n\t            setCookie('BothMM.encoding', encoding, '/');\n\t            for (i = 0; i < aecListeners.length; i++) {\n\t                try {\n\t                    aecListeners[i](before, encoding);\n\t                } catch (e) {\n\t                    console.error(e);\n\t                }\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return BothMM;\n\t})();\n\t\n\t/**\n\t * The library version according to <a href=\"http://semver.org/\">semver</a> semantics.\n\t *\n\t * This member is available during initialisation.\n\t */\n\tBothMM.VERSION = '0.0.1';\n\t\n\t/**\n\t * The DOM elements to translate. Defaults to anything with a [both-mm] attribute,\n\t * unless it is nested within another such element. */\n\tBothMM.roots = [];\n\t\n\t///////////////////////////////////////////////////////////////////\n\t// Utility functions\n\t\n\tvar stringConverterMap = { // TODO: Implement actual text translation\n\t    zawgyi_unicode: function zawgyi_unicode(s) {\n\t        // Silly translator that puts _underline_ on each word.\n\t        return s.replace(/((\\s|^)+)([^\\s$]+)/g, '$1[$3]');\n\t    },\n\t    unicode_zawgyi: function unicode_zawgyi(s) {\n\t        // Silly translator that puts _underline_ on each word.\n\t        return s.replace(/((\\s|^)+)([^\\s$]+)/g, '$1[$3]');\n\t    },\n\t    no_op: function no_op(s) {\n\t        return s;\n\t    }\n\t};\n\t\n\t/**\n\t * Find all nodes on page with a given attribute\n\t *\n\t * @param {string} an\n\t * @returns {Array<Element> | NodeList}\n\t */\n\tfunction findWithAttr(an) {\n\t    if (typeof document.querySelectorAll == 'function') {\n\t        return document.querySelectorAll('[' + an + ']');\n\t    } else {\n\t        var all = document.getElementsByTagName('*');\n\t        var marked = [];\n\t        for (var i = 0; i < all.length; i++) {\n\t            if (all[i].getAttribute(an)) {\n\t                marked.push(all[i]);\n\t            }\n\t        }\n\t    }\n\t    return marked;\n\t}\n\t\n\t/**\n\t * Filters a list of Nodes, discarding the ones with an ancestor having a particular attribute\n\t * @param {string} an\n\t * @param {Array<Element> | NodeList} elms\n\t * @returns {Array<Element>}\n\t */\n\tfunction discardIfAncestorAttr(an, elms) {\n\t    var good = [];\n\t    for (var i = 0; i < elms.length; i++) {\n\t        var elm = elms[i];\n\t        for (var p = elm.parentNode; p && p.getAttribute; p = p.parentNode) {\n\t            //console.log('>', p);\n\t            if (p.getAttribute(an)) {\n\t                elm = null;\n\t            }\n\t        }\n\t        if (elm) {\n\t            good.push(elm);\n\t        }\n\t    }\n\t    return good;\n\t}\n\t\n\t/**\n\t * Recursively translate a list of elements.\n\t *\n\t * @param encSrcParent Encoding source inherited from parents. This may be overridden in children.\n\t * @param elms List of elements to translate.\n\t */\n\tfunction translateSub(encSrcParent, elms) {\n\t    var encTgt = BothMM.encoding;\n\t    for (var i = 0; i < elms.length; i++) {\n\t        var elm = elms[i];\n\t\n\t        if (elm.nodeType == 3) {\n\t            // It's a text node, so let's do some actual text conversion\n\t            if (!elm.__raw) elm.__raw = elm.nodeValue;\n\t            var cvtKey = encSrcParent + '_' + encTgt;\n\t            //console.log(cvtKey, elm);\n\t            var cvt = stringConverterMap[cvtKey] || stringConverterMap.no_op;\n\t            elm.nodeValue = cvt(elm.__raw);\n\t            // TODO: Update on DOMCharacterDataModified  -- fallback to setInterval?\n\t        } else {\n\t            // No text here. Update settings and recurse\n\t            var encSrcSel = elm.getAttribute('both-mm') || encSrcParent;\n\t            var encTgtEff = encSrcSel == 'off' ? 'off' : encTgt != encSrcSel ? encTgt : 'off';\n\t            //console.log(encSrcParent, encSrcSel, \"->\", encTgt, encTgtEff, elm);\n\t            elm.setAttribute('both-mm-now', encTgtEff);\n\t            translateSub(encSrcSel, elm.childNodes);\n\t        }\n\t    }\n\t}\n\t\n\tfunction getCookie(key) {\n\t    return decodeURIComponent(document.cookie.replace(new RegExp('(?:(?:^|.*;)\\\\s*' + encodeURIComponent(key).replace(/[\\-\\.\\+\\*]/g, '\\\\$&') + '\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$'), '$1')) || null;\n\t}\n\t\n\tfunction setCookie(key, value, path) {\n\t    document.cookie = encodeURIComponent(key) + '=' + encodeURIComponent(value) + '; expires=Fri, 31 Dec 9999 23:59:59 GMT' + (path ? '; path=' + path : '');\n\t}\n\t\n\t// INITIALISE WHEN DOM IS READY\n\t\n\t/** Initialise BothMM state when DOM is whenReady. */\n\tfunction onDomReady() {\n\t\n\t    /**\n\t     * Whether the Zawgyi-One font is available in the user's browser.\n\t     * @type {bool}\n\t     */\n\t    BothMM.zawgyiFont = BothMM.hasFont('Zawgyi-One');\n\t\n\t    /**\n\t     * Translate elements to use this presentation.\n\t     * @type {string} (zawgyi|unicode|off)\n\t     */\n\t    BothMM.encoding = getCookie('BothMM.encoding') || (BothMM.zawgyiFont ? 'zawgyi' : 'unicode');\n\t\n\t    BothMM.roots = discardIfAncestorAttr('both-mm', findWithAttr('both-mm'));\n\t    console.log('BothMM.roots discovered:', BothMM.roots.length);\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t        for (var _iterator = BothMM.roots[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var root = _step.value;\n\t\n\t            console.log('  ', root);\n\t        }\n\t    } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t    } finally {\n\t        try {\n\t            if (!_iteratorNormalCompletion && _iterator['return']) {\n\t                _iterator['return']();\n\t            }\n\t        } finally {\n\t            if (_didIteratorError) {\n\t                throw _iteratorError;\n\t            }\n\t        }\n\t    }\n\t\n\t    // Translate all the discovered elements\n\t    BothMM.setEncoding();\n\t\n\t    // Change the encoding when any element with the \"both-mm-select\" attribute is clicked\n\t    var selectors = findWithAttr('both-mm-select');\n\t    for (var i = 0; i < selectors.length; i++) {\n\t        selectors[i].addEventListener('click', function (evt) {\n\t            var encoding = evt.target.getAttribute('both-mm-select');\n\t            BothMM.setEncoding(encoding);\n\t        });\n\t    }\n\t\n\t    // Notify listeners that we are ready\n\t    var _iteratorNormalCompletion2 = true;\n\t    var _didIteratorError2 = false;\n\t    var _iteratorError2 = undefined;\n\t\n\t    try {\n\t        for (var _iterator2 = readyListeners[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t            var listener = _step2.value;\n\t\n\t            try {\n\t                listener();\n\t            } catch (e) {\n\t                console.error(e);\n\t            }\n\t        }\n\t    } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t    } finally {\n\t        try {\n\t            if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n\t                _iterator2['return']();\n\t            }\n\t        } finally {\n\t            if (_didIteratorError2) {\n\t                throw _iteratorError2;\n\t            }\n\t        }\n\t    }\n\t\n\t    readyListeners = undefined;\n\t}\n\t\n\t(function ready() {\n\t    if (document.readyState === 'complete') {\n\t        setTimeout(onDomReady, 1);\n\t    } else if (document.addEventListener) {\n\t        document.addEventListener('DOMContentLoaded', onDomReady);\n\t    } else {\n\t        setTimeout(ready, 20);\n\t    }\n\t})();\n\t\n\texports['default'] = BothMM;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** build/BothMM-min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap efd09fb9ee1d4194293b\n **/","// Copyright (C) 2015 Logi Ragnarsson <logi@logi.org>\n\n// Ensure that console.log and console.error don't cause errors\nvar console = window.console || {};\nconsole.log = console.log || (() => {\n    });\nconsole.error = console.error || console.log;\n\n// Private state\n\nvar readyListeners = [];\nvar becListeners = [];\nvar aecListeners = [];\n\n\n/**\n * Library to allow Burmese-language web content to be authored in both Zawgyi and Unicode and to be viewed by users\n * whichever font/encoding they have configured in their browsers.\n *\n * It initially has a very limited set of members, until the library has properly initialised. Those members are\n * documented as such.\n */\nclass BothMM {\n\n    /**\n     * Call the passed-in function when the BothMM library is whenReady. This is guaranteed to also be after the DOM is\n     * initialised.\n     * @param f\n     */\n    static ready(f) {\n        if (readyListeners) {\n            readyListeners.push(f);\n        } else {\n            setTimeout(f, 0);\n        }\n    }\n\n    /**\n     * Tests whether a given font is installed in the user's browser.\n     * @param {string} font The name of the font to test for\n     * @returns {boolean} Whether the font is available\n     */\n    static hasFont(font) {\n        /* Works by constructing a <div/> with some text in the requested font,\n         * but either \"sans-serif\" or \"monospace\" as the backup font. If the font\n         * exists, the browser will use that font and both elements have the same\n         * width. If the font does not exist, the fallback fonts have very\n         * different widths. */\n\n        var node = document.createElement('div');\n        node.innerHTML = '<span style=\"position:absolute!important;width:auto!important;font-size:100px!important;left:-999px\">. . .</span>';\n        node = node.firstChild;\n\n        node.style.fontFamily = font + ', sans-serif';\n        document.body.appendChild(node);\n        var widthOrSans = node.clientWidth;\n        node.style.fontFamily = font + ', monospace';\n        var widthOrMono = node.clientWidth;\n        document.body.removeChild(node);\n\n        console.log(font, widthOrSans == widthOrMono ? 'exists' : 'is bogus', widthOrSans, widthOrMono);\n        return widthOrSans == widthOrMono;\n    }\n\n    /**\n     * Register function to call before the encoding is changed.\n     * If the function throws an exception, then the change will be aborted. */\n    static beforeEncodingChange(f) {\n        becListeners.push(f)\n    }\n\n    /**\n     * Register function to call after the encoding has been changed.\n     * If the function throws an exception, then the change will be aborted. */\n    static afterEncodingChange(f) {\n        aecListeners.push(f)\n    }\n\n    /**\n     *  Set the target encoding and translate all discovered element.\n     *  @param {string=} encoding Change to this encoding or omit to refresh translation.\n     */\n    static setEncoding(encoding) {\n        if (encoding === undefined) {\n            encoding = BothMM.encoding;\n        }\n        var before = BothMM.encoding;\n        for (var i = 0; i < becListeners.length; i++) {\n            becListeners[i](before, encoding)\n        }\n        BothMM.encoding = encoding;\n        translateSub(\"off\", BothMM.roots);\n\n        setCookie('BothMM.encoding', encoding, '/');\n        for (i = 0; i < aecListeners.length; i++) {\n            try {\n                aecListeners[i](before, encoding)\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}\n\n/**\n * The library version according to <a href=\"http://semver.org/\">semver</a> semantics.\n *\n * This member is available during initialisation.\n */\nBothMM.VERSION = \"0.0.1\";\n\n\n/**\n * The DOM elements to translate. Defaults to anything with a [both-mm] attribute,\n * unless it is nested within another such element. */\nBothMM.roots = [];\n\n\n///////////////////////////////////////////////////////////////////\n// Utility functions\n\nvar stringConverterMap = {  // TODO: Implement actual text translation\n    zawgyi_unicode: function (s) {\n        // Silly translator that puts _underline_ on each word.\n        return s.replace(/((\\s|^)+)([^\\s$]+)/g, \"$1[$3]\");\n    },\n    unicode_zawgyi: function (s) {\n        // Silly translator that puts _underline_ on each word.\n        return s.replace(/((\\s|^)+)([^\\s$]+)/g, \"$1[$3]\");\n    },\n    no_op: function (s) {\n        return s;\n    }\n};\n\n\n/**\n * Find all nodes on page with a given attribute\n *\n * @param {string} an\n * @returns {Array<Element> | NodeList}\n */\nfunction findWithAttr(an) {\n    if (typeof(document.querySelectorAll) == \"function\") {\n        return document.querySelectorAll(\"[\" + an + \"]\");\n    } else {\n        var all = document.getElementsByTagName(\"*\");\n        var marked = [];\n        for (var i = 0; i < all.length; i++) {\n            if (all[i].getAttribute(an)) {\n                marked.push(all[i]);\n            }\n        }\n    }\n    return marked;\n}\n\n/**\n * Filters a list of Nodes, discarding the ones with an ancestor having a particular attribute\n * @param {string} an\n * @param {Array<Element> | NodeList} elms\n * @returns {Array<Element>}\n */\nfunction discardIfAncestorAttr(an, elms) {\n    var good = [];\n    for (var i = 0; i < elms.length; i++) {\n        var elm = elms[i];\n        for (var p = elm.parentNode; p && p.getAttribute; p = p.parentNode) {\n            //console.log('>', p);\n            if (p.getAttribute(an)) {\n                elm = null;\n            }\n        }\n        if (elm) {\n            good.push(elm);\n        }\n    }\n    return good;\n}\n\n/**\n * Recursively translate a list of elements.\n *\n * @param encSrcParent Encoding source inherited from parents. This may be overridden in children.\n * @param elms List of elements to translate.\n */\nfunction translateSub(encSrcParent, elms) {\n    var encTgt = BothMM.encoding;\n    for (var i = 0; i < elms.length; i++) {\n        var elm = elms[i];\n\n        if (elm.nodeType == 3) {\n            // It's a text node, so let's do some actual text conversion\n            if (!elm.__raw) elm.__raw = elm.nodeValue;\n            var cvtKey = encSrcParent + \"_\" + encTgt;\n            //console.log(cvtKey, elm);\n            var cvt = stringConverterMap[cvtKey] || stringConverterMap.no_op;\n            elm.nodeValue = cvt(elm.__raw);\n            // TODO: Update on DOMCharacterDataModified  -- fallback to setInterval?\n        } else {\n            // No text here. Update settings and recurse\n            var encSrcSel = elm.getAttribute(\"both-mm\") || encSrcParent;\n            var encTgtEff = (encSrcSel == \"off\") ? \"off\" : (encTgt != encSrcSel) ? encTgt : \"off\";\n            //console.log(encSrcParent, encSrcSel, \"->\", encTgt, encTgtEff, elm);\n            elm.setAttribute(\"both-mm-now\", encTgtEff);\n            translateSub(encSrcSel, elm.childNodes);\n        }\n    }\n}\n\nfunction getCookie(key) {\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n}\n\nfunction setCookie(key, value, path) {\n    document.cookie = encodeURIComponent(key) + \"=\" + encodeURIComponent(value) + \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" + (path ? \"; path=\" + path : \"\");\n}\n\n// INITIALISE WHEN DOM IS READY\n\n/** Initialise BothMM state when DOM is whenReady. */\nfunction onDomReady() {\n\n    /**\n     * Whether the Zawgyi-One font is available in the user's browser.\n     * @type {bool}\n     */\n    BothMM.zawgyiFont = BothMM.hasFont('Zawgyi-One');\n\n    /**\n     * Translate elements to use this presentation.\n     * @type {string} (zawgyi|unicode|off)\n     */\n    BothMM.encoding = getCookie('BothMM.encoding') || (BothMM.zawgyiFont ? 'zawgyi' : 'unicode');\n\n    BothMM.roots = discardIfAncestorAttr(\"both-mm\", findWithAttr(\"both-mm\"));\n    console.log('BothMM.roots discovered:', BothMM.roots.length);\n    for (let root of BothMM.roots) {\n        console.log('  ', root);\n    }\n\n    // Translate all the discovered elements\n    BothMM.setEncoding();\n\n    // Change the encoding when any element with the \"both-mm-select\" attribute is clicked\n    var selectors = findWithAttr(\"both-mm-select\");\n    for (var i = 0; i < selectors.length; i++) {\n        selectors[i].addEventListener('click', function (evt) {\n            var encoding = evt.target.getAttribute(\"both-mm-select\");\n            BothMM.setEncoding(encoding);\n        });\n    }\n\n    // Notify listeners that we are ready\n    for (let listener of readyListeners) {\n        try {\n            listener();\n        } catch (e) {\n            console.error(e);\n        }\n    }\n    readyListeners = undefined;\n}\n\n(function ready() {\n    if (document.readyState === \"complete\") {\n        setTimeout(onDomReady, 1);\n    } else if (document.addEventListener) {\n        document.addEventListener('DOMContentLoaded', onDomReady);\n    } else {\n        setTimeout(ready, 20);\n    }\n})();\n\nexport default BothMM;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/"],"sourceRoot":""}